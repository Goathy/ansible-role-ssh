# GENERETED BY ANSIBLE PLAYBOOK
# DO NOT EDIT THIS FILE MANUALLY!

Protocol {{ sshd_protocol | join(',') }}
Subsystem sftp /usr/libexec/openssh/sftp-server

{% if sshd_cipher_algorithms|length >0 %}
Ciphers {{ sshd_cipher_algorithms | join(',') }}
{% endif %}

{% if sshd_key_exchange_algorithms|length >0 %}
KexAlgorithms {{ sshd_key_exchange_algorithms | join(',') }}
{% endif %}

{% if sshd_mac_algorithms|length >0 %}
MACs {{ sshd_mac_algorithms | join(',') }}
{% endif %}

PermitRootLogin without-password
PubkeyAuthentication yes
AuthenticationMethods publickey
UsePAM yes
{% for item in sshd_listen_address %}
ListenAddress {{ item.address }}:{{ item.port }}
{% endfor %}
AddressFamily inet
MaxAuthTries 3
PasswordAuthentication no
PermitEmptyPasswords no
AllowAgentForwarding no
TCPKeepAlive no
MaxSessions 1
LogLevel VERBOSE
ClientAliveCountMax 2
AllowTcpForwarding no
AuthorizedKeysFile /etc/ssh/authorized_keys.d/%u

{% if ssh_deny_users|length > 0 %}
DenyUsers {{ ssh_deny_users | join(' ') }}
{% endif %}
{% if ssh_allow_users|length > 0 %}
AllowUsers {{ ssh_allow_users | join(' ') }}
{% endif %}
{% if ssh_deny_groups|length > 0 %}
DenyGroups {{ ssh_deny_groups | join(' ') }}
{% endif %}
{% if ssh_allow_groups|length > 0 %}
AllowGroups {{ ssh_allow_groups | join(' ') }}
{% endif %}
